<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Lightense is pretty cool | A blog by Yosua Ian Sebastian</title><meta name=keywords content="hugo,shortcodes,100DaysToOffload"><meta name=description content="I finally added image zoom functionality here."><meta name=author content="Yosua"><link rel=canonical href=https://darcien.dev/p/lightense/><link crossorigin=anonymous href=/assets/css/stylesheet.7140587df96a2b1a49eb723fa7063dc0c641a6cb638f3140e8d3beb4deae4f5c.css integrity="sha256-cUBYfflqKxpJ63I/pwY9wMZBpstjjzFA6NO+tN6uT1w=" rel="preload stylesheet" as=style><link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon.png?v=2"><link rel=icon type=image/png sizes=32x32 href="/favicon-32x32.png?v=2"><link rel=icon type=image/png sizes=16x16 href="/favicon-16x16.png?v=2"><link rel=manifest href="/site.webmanifest?v=2"><link rel=mask-icon href="/safari-pinned-tab.svg?v=2" color=#34343c><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link crossorigin=anonymous href=/style.css rel="preload stylesheet" as=style><meta property="og:title" content="Lightense is pretty cool"><meta property="og:description" content="I finally added image zoom functionality here."><meta property="og:type" content="article"><meta property="og:url" content="https://darcien.dev/p/lightense/"><meta property="article:section" content="p"><meta property="article:published_time" content="2023-09-04T23:32:45+07:00"><meta property="article:modified_time" content="2023-09-04T23:32:45+07:00"><meta property="og:site_name" content="A blog by Yosua Ian Sebastian"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lightense is pretty cool"><meta name=twitter:description content="I finally added image zoom functionality here."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Ps","item":"https://darcien.dev/p/"},{"@type":"ListItem","position":2,"name":"Lightense is pretty cool","item":"https://darcien.dev/p/lightense/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Lightense is pretty cool","name":"Lightense is pretty cool","description":"I finally added image zoom functionality here.","keywords":["hugo","shortcodes","100DaysToOffload"],"articleBody":" TL;DR I created yet another figure Hugo shortcode that can be zoomed in by tapping on and can be resized at build time with resize parameter.\nWhere is the code? Here, put it in layouts/shortcodes/figure.html.\n{{- $src := .Get \"src\" -}} {{- $imgFromPage := $.Page.Resources.GetMatch $src -}} {{- $imgFromGlobal := resources.Get $src -}} {{ if $imgFromPage | or $imgFromGlobal }} {{ $img := $imgFromPage | or $imgFromGlobal }} {{ $img := cond (isset .Params \"resize\") ($img.Resize (.Get \"resize\" | default \"1x1\")) $img }} \u003cfigure\u003e {{- $caption := trim (.Get \"caption\") \"\\n\" -}} \u003cimg loading=\"lazy\" src=\"{{ $img.RelPermalink }}\" {{/* If alt or caption is specified, use it as alt text. */}} {{- if or (.Get \"alt\") $caption }} alt=\"{{ with .Get \"alt\" }}{{ . }}{{ else }}{{ $caption | markdownify | plainify }}{{ end }}\" {{- end -}} \u003e {{- if $caption -}} \u003cfigcaption\u003e {{/* The extra \u003cp\u003e is intentional. */}} {{/* Otherwise different style for figure title is used. */}} {{/* Right now caption won't support title or link here. */}} \u003cp\u003e {{- $caption | markdownify -}} \u003c/p\u003e \u003c/figcaption\u003e {{- end }} \u003c/figure\u003e {{- else -}} {{- errorf \"figure: image '%s' must be an existing page or global resource!\" $src -}} {{- end -}} {{- if not (.Page.Scratch.Get \"lightenseLoaded\") -}} {{- .Page.Scratch.Set \"lightenseLoaded\" true -}} \u003cscript defer src=\"https://cdn.jsdelivr.net/npm/lightense-images@1.0.17/dist/lightense.min.js\" integrity=\"sha256-0L7PA+rlAMaq+Gkzls+i1cUvY9i7D+XF/Yl3BhYKABo=\" crossorigin=\"anonymous\"\u003e\u003c/script\u003e \u003cscript defer type=\"text/javascript\"\u003e window.addEventListener(\"load\", function() { Lightense('img:not(.no-lightense, [aria-label=\"logo\"])', { // Override the bg color behind the overlayed image when lightbox is opened. // Using secondary value from theme with high opacity to make it work with // both light and dark mode because we don't have access to theme variable here. background: 'rgb(155, 156, 157 / 60%)', }); }, false); \u003c/script\u003e {{- end -}} Do you have some examples to play with? Sure, here are some cat photo I took and other random things.\nA cat I saw when I went to the company trip.\nOne word, green. Behind the iron fence there is a river not visible in the photo. Also resized down to height=360px.\nThis figure use global resource. The shortcode can handle both page and global resource. I don’t understand why Hugo don’t have this out of the box.\nBut why? I like looking at a picture on full window size without opening in new tab or manually zooming in the website.\nReally? Okay, the other part is because I saw the same thing on someone’s blog1, and thought it was pretty cool. Seems like that blog is also built with Hugo but I couldn’t figure out what theme is being used.\nAfter few minutes and one DevTools later, their zoomable image is powered by Lightense. And after bruteforcing my way through GitHub code search, I found out the theme being used. It’s Menca, a paid theme by AnvodStudio.\nAww shucks, I did not expect it to be a paid theme. But it is a good theme, so I can understand it might worth 49 USD for some people.\nAnd now, here I am. After recreated the zoomable image part of Menca theme. Feeling satisfied.\nOkay, maybe a bit of rant During the making, I spent more time trying to figure out how to do x with Hugo. It was painful.\nNow I know that in Hugo I can’t:\nset variable value from condionals to outside context set variable value from condionals to outside context set variable value from condionals to outside context ternary for setting variable value short circuit logic Yes I mentioned the same thing 3 times. It’s painful enough that I can’t do:\n// This is JS syntax for example let foo if (x) { // This doesn't work in Hugo: foo = doSomething(x) // What Hugo does is more like this, // it creates a new variable in the current scope. // And the variable in the parent scope is untouched. let foo = doSomething(x) } And having no ternary here is like rubbing salt on the wounds.\n// In JS I would write something like this img = resize ? img.resizeTo(resize) : img // But I had to write it like this let truthy = img.resizeTo(resize || '1x1') let falsy = img img = cond(isSet(params, \"resize\"), truthy, falsy) // Actual Hugo template code: // {{ $img := cond (isset .Params \"resize\") ($img.Resize (.Get \"resize\" | default \"1x1\")) $img }} I know it’s probably not Hugo’s fault. I feel like hitting the limit of templating syntax. But I like writing in markdown with a small sprinkles of dynamic code here in there.\nI should explore more in this area, maybe there’s already something out there for me. Just waiting to be found…\nPost 20 of #100DaysToOffload.\nCarlos’ blog, he’s a cool person; https://carlosbecker.com/ ↩︎\n","wordCount":"780","inLanguage":"en","datePublished":"2023-09-04T23:32:45+07:00","dateModified":"2023-09-04T23:32:45+07:00","author":{"@type":"Person","name":"Yosua"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://darcien.dev/p/lightense/"},"publisher":{"@type":"Organization","name":"A blog by Yosua Ian Sebastian","logo":{"@type":"ImageObject","url":"https://darcien.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://darcien.dev/ accesskey=h title="Yosua Ian Sebastian (Alt + H)"><img src=https://darcien.dev/whale_goth.svg alt aria-label=logo height=28>Yosua Ian Sebastian</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://darcien.dev/about title=about><span>about</span></a></li><li><a href=https://darcien.dev/uses title=uses><span>uses</span></a></li><li><a href=https://darcien.dev/tags title=tags><span>tags</span></a></li><li><a href=https://darcien.dev/search title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://status.darcien.dev/ title=status><span>status</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Lightense is pretty cool</h1><div class=post-meta><span title='2023-09-04 23:32:45 +0700 WIB'>2023-09-04</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;780 words&nbsp;·&nbsp;Yosua</div></header><div class=post-content><hr><p>TL;DR I created yet another <code>figure</code> Hugo shortcode that can be zoomed in by tapping on
and can be resized at build time with <code>resize</code> parameter.</p><hr><h2 id=where-is-the-code>Where is the code?<a hidden class=anchor aria-hidden=true href=#where-is-the-code>#</a></h2><p>Here, put it in <code>layouts/shortcodes/figure.html</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>{{- $src := .Get &#34;src&#34; -}}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{- $imgFromPage := $.Page.Resources.GetMatch $src -}}
</span></span><span class=line><span class=cl>{{- $imgFromGlobal := resources.Get $src -}}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ if $imgFromPage | or $imgFromGlobal }}
</span></span><span class=line><span class=cl>  {{ $img := $imgFromPage | or $imgFromGlobal }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  {{ $img := cond (isset .Params &#34;resize&#34;) ($img.Resize (.Get &#34;resize&#34; | default &#34;1x1&#34;)) $img }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>figure</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{- $caption := trim (.Get &#34;caption&#34;) &#34;\n&#34; -}}
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>img</span>
</span></span><span class=line><span class=cl>      <span class=na>loading</span><span class=o>=</span><span class=s>&#34;lazy&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ $img.RelPermalink }}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=err>{{/*</span> <span class=na>If</span> <span class=na>alt</span> <span class=na>or</span> <span class=na>caption</span> <span class=na>is</span> <span class=na>specified</span><span class=err>,</span> <span class=na>use</span> <span class=na>it</span> <span class=na>as</span> <span class=na>alt</span> <span class=na>text</span><span class=err>.</span> <span class=err>*/}}</span>
</span></span><span class=line><span class=cl>      <span class=err>{{</span><span class=na>-</span> <span class=na>if</span> <span class=na>or</span> <span class=err>(.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>alt</span><span class=err>&#34;)</span> <span class=err>$</span><span class=na>caption</span> <span class=err>}}</span>
</span></span><span class=line><span class=cl>      <span class=na>alt</span><span class=o>=</span><span class=s>&#34;{{ with .Get &#34;</span><span class=na>alt</span><span class=err>&#34;</span> <span class=err>}}{{</span> <span class=err>.</span> <span class=err>}}{{</span> <span class=na>else</span> <span class=err>}}{{</span> <span class=err>$</span><span class=na>caption</span> <span class=err>|</span> <span class=na>markdownify</span> <span class=err>|</span> <span class=na>plainify</span> <span class=err>}}{{</span> <span class=na>end</span> <span class=err>}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=err>{{</span><span class=na>-</span> <span class=na>end</span> <span class=na>-</span><span class=err>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    {{- if $caption -}}
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>figcaption</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        {{/* The extra <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> is intentional. */}}
</span></span><span class=line><span class=cl>        {{/* Otherwise different style for figure title is used. */}}
</span></span><span class=line><span class=cl>        {{/* Right now caption won&#39;t support title or link here. */}}
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          {{- $caption | markdownify -}}
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>figcaption</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{- end }}
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>figure</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{- else -}}
</span></span><span class=line><span class=cl>{{- errorf &#34;figure: image &#39;%s&#39; must be an existing page or global resource!&#34; $src -}}
</span></span><span class=line><span class=cl>{{- end -}}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{- if not (.Page.Scratch.Get &#34;lightenseLoaded&#34;) -}}
</span></span><span class=line><span class=cl>  {{- .Page.Scratch.Set &#34;lightenseLoaded&#34; true -}}
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>script</span> <span class=na>defer</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/lightense-images@1.0.17/dist/lightense.min.js&#34;</span> <span class=na>integrity</span><span class=o>=</span><span class=s>&#34;sha256-0L7PA+rlAMaq+Gkzls+i1cUvY9i7D+XF/Yl3BhYKABo=&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>script</span> <span class=na>defer</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;load&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>Lightense</span><span class=p>(</span><span class=s1>&#39;img:not(.no-lightense, [aria-label=&#34;logo&#34;])&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Override the bg color behind the overlayed image when lightbox is opened.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// Using secondary value from theme with high opacity to make it work with
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// both light and dark mode because we don&#39;t have access to theme variable here.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>background</span><span class=o>:</span> <span class=s1>&#39;rgb(155, 156, 157 / 60%)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>{{- end -}}
</span></span></code></pre></div><h2 id=do-you-have-some-examples-to-play-with>Do you have some examples to play with?<a hidden class=anchor aria-hidden=true href=#do-you-have-some-examples-to-play-with>#</a></h2><p>Sure, here are some cat photo I took and other random things.</p><figure><img loading=lazy src=/p/lightense/cat.jpg alt="Cute cat sitting on chair."><figcaption><p>A cat I saw when I went to the company trip.</p></figcaption></figure><script defer src=https://cdn.jsdelivr.net/npm/lightense-images@1.0.17/dist/lightense.min.js integrity="sha256-0L7PA+rlAMaq+Gkzls+i1cUvY9i7D+XF/Yl3BhYKABo=" crossorigin=anonymous></script>
<script defer type=text/javascript>window.addEventListener("load",function(){Lightense('img:not(.no-lightense, [aria-label="logo"])',{background:"rgb(155, 156, 157 / 60%)"})},!1)</script><figure><img loading=lazy src=/p/lightense/bogor_hu9b1a8372fdbefe87bd83c09aca4abcd4_4681944_0x360_resize_q75_box.jpg alt="One word, green. Behind the iron fence there is a river not visible in the photo.
Also resized down to height=360px."><figcaption><p>One word, green. Behind the iron fence there is a river not visible in the photo.
Also resized down to height=360px.</p></figcaption></figure><figure><img loading=lazy src=/img/shiromedia-penguin-front_hu16139e444f06f4633196fffaa4c9ff91_726080_0x640_resize_q75_box.jpg alt="This figure use global resource.
The shortcode can handle both page and global resource.
I don&amp;rsquo;t understand why Hugo don&amp;rsquo;t have this out of the box."><figcaption><p>This figure use global resource.
The shortcode can handle both page and global resource.
I don&rsquo;t understand why Hugo don&rsquo;t have this out of the box.</p></figcaption></figure><h2 id=but-why>But why?<a hidden class=anchor aria-hidden=true href=#but-why>#</a></h2><p>I like looking at a picture on full window size without opening in new tab
or manually zooming in the website.</p><h2 id=really>Really?<a hidden class=anchor aria-hidden=true href=#really>#</a></h2><p>Okay, the other part is because I saw the same thing on someone&rsquo;s blog<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>,
and thought it was pretty cool.
Seems like that blog is also built with <a href=https://gohugo.io/>Hugo</a> but I couldn&rsquo;t figure out
what theme is being used.</p><p>After few minutes and one DevTools later, their zoomable image is powered by
<a href=https://sparanoid.com/work/lightense-images/>Lightense</a>. And after bruteforcing my way through GitHub code search,
I found out the theme being used.
It&rsquo;s <a href=https://themeforest.net/item/menca-modern-personal-blogging-theme-for-hugo/34443213#>Menca</a>, a paid theme by AnvodStudio.</p><p>Aww shucks, I did not expect it to be a paid theme.
But it is a good theme, so I can understand it might worth 49 USD for some people.</p><p>And now, here I am.
After recreated the zoomable image part of Menca theme.
Feeling satisfied.</p><h2 id=okay-maybe-a-bit-of-rant>Okay, maybe a bit of rant<a hidden class=anchor aria-hidden=true href=#okay-maybe-a-bit-of-rant>#</a></h2><p>During the making, I spent more time trying to figure out how to do x with Hugo.
It was painful.</p><p>Now I know that in Hugo I can&rsquo;t:</p><ul><li>set variable value from condionals to outside context</li><li>set variable value from condionals to outside context</li><li>set variable value from condionals to outside context</li><li>ternary for setting variable value</li><li>short circuit logic</li></ul><p>Yes I mentioned the same thing 3 times.
It&rsquo;s painful enough that I can&rsquo;t do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// This is JS syntax for example
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>foo</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// This doesn&#39;t work in Hugo:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>foo</span> <span class=o>=</span> <span class=nx>doSomething</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>// What Hugo does is more like this,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// it creates a new variable in the current scope.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// And the variable in the parent scope is untouched.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>let</span> <span class=nx>foo</span> <span class=o>=</span> <span class=nx>doSomething</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>And having no ternary here is like rubbing salt on the wounds.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// In JS I would write something like this
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>img</span> <span class=o>=</span> <span class=nx>resize</span> <span class=o>?</span> <span class=nx>img</span><span class=p>.</span><span class=nx>resizeTo</span><span class=p>(</span><span class=nx>resize</span><span class=p>)</span> <span class=o>:</span> <span class=nx>img</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// But I had to write it like this
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>truthy</span> <span class=o>=</span> <span class=nx>img</span><span class=p>.</span><span class=nx>resizeTo</span><span class=p>(</span><span class=nx>resize</span> <span class=o>||</span> <span class=s1>&#39;1x1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>falsy</span> <span class=o>=</span> <span class=nx>img</span>
</span></span><span class=line><span class=cl><span class=nx>img</span> <span class=o>=</span> <span class=nx>cond</span><span class=p>(</span><span class=nx>isSet</span><span class=p>(</span><span class=nx>params</span><span class=p>,</span> <span class=s2>&#34;resize&#34;</span><span class=p>),</span> <span class=nx>truthy</span><span class=p>,</span> <span class=nx>falsy</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Actual Hugo template code:
</span></span></span><span class=line><span class=cl><span class=c1>// {{ $img := cond (isset .Params &#34;resize&#34;) ($img.Resize (.Get &#34;resize&#34; | default &#34;1x1&#34;)) $img }}
</span></span></span></code></pre></div><p>I know it&rsquo;s probably not Hugo&rsquo;s fault.
I feel like hitting the limit of templating syntax.
But I like writing in markdown with a small sprinkles of dynamic code here in there.</p><p>I should explore more in this area, maybe there&rsquo;s already something out there for me.
Just waiting to be found&mldr;</p><hr><p>Post 20 of <a href=https://100daystooffload.com/>#100DaysToOffload</a>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Carlos&rsquo; blog, he&rsquo;s a cool person; <a href=https://carlosbecker.com/>https://carlosbecker.com/</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://darcien.dev/tags/hugo/>hugo</a></li><li><a href=https://darcien.dev/tags/shortcodes/>shortcodes</a></li><li><a href=https://darcien.dev/tags/100daystooffload/>100DaysToOffload</a></li></ul><nav class=paginav><a class=prev href=https://darcien.dev/p/bought-goods-from-booth-again/><span class=title>« Prev</span><br><span>Bought goods from BOOTH.pm (again) with EMS</span></a>
<a class=next href=https://darcien.dev/p/systemd-cgtop-for-systemd-cpu-usage/><span class=title>Next »</span><br><span>Q: How do I get % CPU usage of individual service in systemd?</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 A blog by Yosua Ian Sebastian</span><br><span>Blog logo is a recolored <a target=_blank referrerpolicy=no-referrer rel=noopener href=https://twemoji.twitter.com/>Spouting Whale Twemoji</a> by Twitter, Inc
and other contributors and is licensed under <a target=_blank referrerpolicy=no-referrer rel=noopener href=https://creativecommons.org/licenses/by/4.0/>CC-BY
4.0</a></span><div class=footer-blank>This space intentionally left blank.</div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>