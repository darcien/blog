<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SQLFluff Is a Thing | A blog by Yosua Ian Sebastian</title><meta name=keywords content="til,100DaysToOffload"><meta name=description content="A fluff that I wish I had known earlier."><meta name=author content="Yosua"><link rel=canonical href=https://darcien.dev/p/sqlfluff-is-a-thing/><link crossorigin=anonymous href=/assets/css/stylesheet.7140587df96a2b1a49eb723fa7063dc0c641a6cb638f3140e8d3beb4deae4f5c.css integrity="sha256-cUBYfflqKxpJ63I/pwY9wMZBpstjjzFA6NO+tN6uT1w=" rel="preload stylesheet" as=style><link rel=icon href=https://darcien.dev/whale72.png><link rel=icon type=image/png sizes=16x16 href=https://darcien.dev/whale16.png><link rel=icon type=image/png sizes=32x32 href=https://darcien.dev/whale32.png><link rel=apple-touch-icon href=https://darcien.dev/whale57.png><link rel=mask-icon href=https://darcien.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="SQLFluff Is a Thing"><meta property="og:description" content="A fluff that I wish I had known earlier."><meta property="og:type" content="article"><meta property="og:url" content="https://darcien.dev/p/sqlfluff-is-a-thing/"><meta property="article:section" content="p"><meta property="article:published_time" content="2022-12-08T22:09:26+07:00"><meta property="article:modified_time" content="2022-12-08T22:09:26+07:00"><meta property="og:site_name" content="A blog by Yosua Ian Sebastian"><meta name=twitter:card content="summary"><meta name=twitter:title content="SQLFluff Is a Thing"><meta name=twitter:description content="A fluff that I wish I had known earlier."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Ps","item":"https://darcien.dev/p/"},{"@type":"ListItem","position":2,"name":"SQLFluff Is a Thing","item":"https://darcien.dev/p/sqlfluff-is-a-thing/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SQLFluff Is a Thing","name":"SQLFluff Is a Thing","description":"A fluff that I wish I had known earlier.","keywords":["til","100DaysToOffload"],"articleBody":" The SQL Linter for Humans\nBored of not having a good SQL linter that works with whichever dialect you’re working with? Fluff is an extensible and modular linter designed to help you write good SQL and catch errors and bad SQL before it hits your database.\nFrom https://www.sqlfluff.com\nEarlier today at work, I was helping my coworker debugging his SQL. The SQL was fairly simple. It creates a few tables, create some foreign keys, and insert some data.\nBut when we execute the SQL, it is failing. Part of the SQL looks like this:\nINSERT INTO \"public\".\"some_table\" (\"category\", \"description\") VALUES (\"drama\", \"tears and blood\"); And the DB spits out this error:\nSQL Error [42703]: ERROR: column \"drama\" does not exist A battle-hardened SQL veteran would probably notice the issue immediately. But it’s not very clear to regular human like me.\nIf you guessed the problem is the quotes, then you’re correct. String value must use single quotes as the double quotes is reserved for objects in PostgreSQL, like table and column names1.\nI found it out after a bit of trial and error, a bit of headbanging, and no googling attempt. Which leads to me trying to find the tool to help writing an actually valid SQL, not one that looks kinda valid but not really. And that’s how I found this fluff, which give somewhat better error message:\nL057 2 / 22 Do not use special characters in identifiers. Hey, at least it’s not complaining about “no drama”. And the mentioning the cause is a special characters already helped pinpoint the issue.\nSo, I am today years old when I learned:\nuse single quotes for string, and double quotes for identifier, SQLFluff is a thing. Post 4 of #100DaysToOffload.\nhttps://www.postgresql.org/docs/current/sql-syntax-lexical.html ↩︎\n","wordCount":"291","inLanguage":"en","datePublished":"2022-12-08T22:09:26+07:00","dateModified":"2022-12-08T22:09:26+07:00","author":{"@type":"Person","name":"Yosua"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://darcien.dev/p/sqlfluff-is-a-thing/"},"publisher":{"@type":"Organization","name":"A blog by Yosua Ian Sebastian","logo":{"@type":"ImageObject","url":"https://darcien.dev/whale72.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://darcien.dev/ accesskey=h title="Home (Alt + H)"><img src=https://darcien.dev/whale72.png alt aria-label=logo height=28>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://darcien.dev/about title=about><span>about</span></a></li><li><a href=https://darcien.dev/search title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://darcien.dev/tags title=tags><span>tags</span></a></li><li><a href=https://darcien.dev/p/index.xml title=rss><span>rss</span></a></li><li><a href=https://github.com/darcien/blog title=source><span>source</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>SQLFluff Is a Thing</h1><div class=post-meta><span title='2022-12-08 22:09:26 +0700 WIB'>2022-12-08</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;291 words&nbsp;·&nbsp;Yosua</div></header><div class=post-content><blockquote><p>The SQL Linter for Humans</p><p>Bored of not having a good SQL linter that works with whichever dialect you’re working with? Fluff is an extensible and modular linter designed to help you write good SQL and catch errors and bad SQL before it hits your database.</p><p>From <a href=https://www.sqlfluff.com>https://www.sqlfluff.com</a></p></blockquote><p>Earlier today at work, I was helping my coworker debugging his SQL.
The SQL was fairly simple.
It creates a few tables, create some foreign keys, and insert some data.</p><p>But when we execute the SQL, it is failing.
Part of the SQL looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=s2>&#34;public&#34;</span><span class=p>.</span><span class=s2>&#34;some_table&#34;</span><span class=w> </span><span class=p>(</span><span class=s2>&#34;category&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;description&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s2>&#34;drama&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;tears and blood&#34;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>And the DB spits out this error:</p><pre tabindex=0><code>SQL Error [42703]: ERROR: column &#34;drama&#34; does not exist
</code></pre><p>A battle-hardened SQL veteran would probably notice the issue immediately.
But it&rsquo;s not very clear to regular human like me.</p><p>If you guessed the problem is the quotes, then you&rsquo;re correct.
String value must use single quotes as the double quotes is reserved for objects in PostgreSQL, like table and column names<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>I found it out after a bit of trial and error, a bit of headbanging, and no googling attempt.
Which leads to me trying to find the tool to help writing an actually valid SQL, not one that looks kinda valid but not really.
And that&rsquo;s how I found this fluff, which give somewhat better error message:</p><pre tabindex=0><code>L057 	2 / 22

Do not use special characters in identifiers.
</code></pre><p>Hey, at least it&rsquo;s not complaining about &ldquo;no drama&rdquo;.
And the mentioning the cause is a special characters already helped pinpoint the issue.</p><p>So, I am today years old when I learned:</p><ul><li>use single quotes for string, and double quotes for identifier,</li><li><a href=https://www.sqlfluff.com/>SQLFluff</a> is a thing.</li></ul><hr><p>Post 4 of <a href=https://100daystooffload.com/>#100DaysToOffload</a>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.postgresql.org/docs/current/sql-syntax-lexical.html>https://www.postgresql.org/docs/current/sql-syntax-lexical.html</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://darcien.dev/tags/til/>til</a></li><li><a href=https://darcien.dev/tags/100daystooffload/>100DaysToOffload</a></li></ul><nav class=paginav><a class=prev href=https://darcien.dev/p/can-you-use-apple-watch-for-hr-monitor-in-zwift/><span class=title>« Prev</span><br><span>Can you use Apple Watch for HR monitor in Zwift?</span></a>
<a class=next href=https://darcien.dev/p/my-2022-without-context/><span class=title>Next »</span><br><span>My 2022 Without Context</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://darcien.dev/>A blog by Yosua Ian Sebastian</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>